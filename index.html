<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Chapter&#160;1.&#160;Boost.Precise and Flat Reflection 1.0</title>
<link rel="stylesheet" href="http://www.boost.org/doc/libs/1_63_0/doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="index.html" title="Chapter&#160;1.&#160;Boost.Precise and Flat Reflection 1.0">
<link rel="next" href="boost_precise_and_flat_reflectio/tutorial.html" title="Tutorial">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="http://www.boost.org/doc/libs/1_63_0/boost.png"></td>
<td align="center"><a href="http://www.boost.org/doc/libs/1_63_0/index.html">Home</a></td>
<td align="center"><a href="http://www.boost.org/doc/libs/1_63_0/libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="http://www.boost.org/doc/libs/1_63_0/more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav"><a accesskey="n" href="boost_precise_and_flat_reflectio/tutorial.html"><img src="http://www.boost.org/doc/libs/1_63_0/doc/src/images/next.png" alt="Next"></a></div>
<div class="chapter">
<div class="titlepage"><div>
<div><h2 class="title">
<a name="boost_precise_and_flat_reflectio"></a>Chapter&#160;1.&#160;Boost.Precise and Flat Reflection 1.0</h2></div>
<div><p class="copyright">Copyright &#169; 2016-2020 Antony Polukhin</p></div>
<div><div class="legalnotice">
<a name="boost_precise_and_flat_reflectio.legal"></a><p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></div>
</div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="section"><a href="index.html#boost_precise_and_flat_reflectio.motivation">Motivation</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/tutorial.html">Tutorial</a></span></dt>
<dd><dl>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/tutorial.html#boost_precise_and_flat_reflectio.tutorial.accessing_pod_member_by_index">Accessing
      POD member by index</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/tutorial.html#boost_precise_and_flat_reflectio.tutorial.flattening">Flattening</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/tutorial.html#boost_precise_and_flat_reflectio.tutorial.flat_or_precise_functions_to_cho">Flat
      or Precise functions to choose</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/tutorial.html#boost_precise_and_flat_reflectio.tutorial.three_ways_of_getting_operators">Three
      ways of getting operators </a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/tutorial.html#boost_precise_and_flat_reflectio.tutorial.reflection_of_unions">Reflection
      of unions </a></span></dt>
</dl></dd>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/short_examples_for_the_impatient.html">Short
    Examples for the Impatient</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/configuration_macro.html">Configuration
    Macro</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/requirements_and_limitations.html">Requirements
    and Limitations</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/how_it_works.html">How it works</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/acknowledgements.html">Acknowledgements</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/reference.html">Reference</a></span></dt>
<dd><dl>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/reference.html#precise_reflection">Precise Reflection</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/reference.html#flat_reflection">Flat Reflection</a></span></dt>
<dt><span class="section"><a href="boost_precise_and_flat_reflectio/reference.html#include_all">Include all</a></span></dt>
</dl></dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_precise_and_flat_reflectio.motivation"></a><a class="link" href="index.html#boost_precise_and_flat_reflectio.motivation" title="Motivation">Motivation</a>
</h2></div></div></div>
<p>
      In C++ we have:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
          tuples - types that provide access to members by index. Those are useful
          for generic programming.
        </li>
<li class="listitem">
          structures - types with named fields that do not provide access to members
          by index. Those are just easy to use.
        </li>
</ul></div>
<p>
      This library provides tuple like methods for aggregate initializable structures,
      making them usable in contexts were only tuples were useful.
    </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://www.boost.org/doc/libs/1_63_0/doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
<p>
        All you have to do is to add <code class="computeroutput"><span class="preprocessor">#include</span>
        <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">pfr</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>.
      </p>
<p>
        No macro or other type/member registrations required.
      </p>
</td></tr>
</table></div>
<p>
      The two different types of reflection are:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
          <span class="bold"><strong>Precise</strong></span> reflection, where each field type
          is represented as it actually exists, even if the type is itself a user-defined
          type.
        </li>
<li class="listitem">
          <span class="bold"><strong>Flat</strong></span> reflection, where user-defined types
          are represented by their individual field types, and all other types are
          represented as they actually exists.
        </li>
</ul></div>
<p>
      As an example:
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">pfr</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">struct</span> <span class="identifier">nested_t</span> <span class="special">{</span> <span class="keyword">char</span> <span class="identifier">c</span><span class="special">;</span> <span class="special">};</span>
<span class="keyword">struct</span> <span class="identifier">foo_t</span> <span class="special">{</span> <span class="keyword">int</span> <span class="identifier">i</span><span class="special">;</span> <span class="identifier">nested_t</span> <span class="identifier">nested</span><span class="special">;</span> <span class="special">};</span>


<span class="keyword">static_assert</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">is_same</span><span class="special">&lt;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">pfr</span><span class="special">::</span><span class="identifier">flat_tuple_element_t</span><span class="special">&lt;</span><span class="number">1</span><span class="special">,</span> <span class="identifier">foo_t</span><span class="special">&gt;,</span> <span class="comment">// Flat reflection.</span>
    <span class="keyword">char</span>    <span class="comment">// `char`, not `nested_t`!</span>
<span class="special">&gt;::</span><span class="identifier">value</span><span class="special">,</span> <span class="string">""</span><span class="special">);</span>


<span class="comment">// Requires C++17 or Loophole enabled:</span>
<span class="keyword">static_assert</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">is_same</span><span class="special">&lt;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">pfr</span><span class="special">::</span><span class="identifier">tuple_element_t</span><span class="special">&lt;</span><span class="number">1</span><span class="special">,</span> <span class="identifier">foo_t</span><span class="special">&gt;,</span>      <span class="comment">// Precise reflection.</span>
    <span class="identifier">nested_t</span>
<span class="special">&gt;::</span><span class="identifier">value</span><span class="special">,</span> <span class="string">""</span><span class="special">);</span>
</pre>
<p>
      Boost.Precise and Flat Reflection (Boost.PFR) adds following out-of-the-box
      functionality for aggregate initializable structures:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
          comparison operators
        </li>
<li class="listitem">
          heterogeneous comparators
        </li>
<li class="listitem">
          hash
        </li>
<li class="listitem">
          stream operators
        </li>
<li class="listitem">
          access to members by index
        </li>
<li class="listitem">
          member reflections
        </li>
<li class="listitem">
          methods for cooperation with <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">tuple</span></code>
        </li>
<li class="listitem">
          methods to visit each field of the structure
        </li>
</ul></div>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="http://www.boost.org/doc/libs/1_63_0/doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
        This is not an official Boost library! It wasn't reviewed and can't be downloaded
        from www.boost.org. This library is available to the community to know real
        interest and get comments for refinement. The intention is to submit library
        to formal review, if community think that it is interesting!
      </p></td></tr>
</table></div>
<div class="caution"><table border="0" summary="Caution">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="http://www.boost.org/doc/libs/1_63_0/doc/src/images/caution.png"></td>
<th align="left">Caution</th>
</tr>
<tr><td align="left" valign="top"><p>
        This is a C++14 library! Pre C++14 compilers (C++11, C++03...) are not supported
      </p></td></tr>
</table></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"><p><small>Last revised: January 18, 2020 at 10:59:15 GMT</small></p></td>
<td align="right"><div class="copyright-footer"></div></td>
</tr></table>
<hr>
<div class="spirit-nav"><a accesskey="n" href="boost_precise_and_flat_reflectio/tutorial.html"><img src="http://www.boost.org/doc/libs/1_63_0/doc/src/images/next.png" alt="Next"></a></div>
</body>
</html>
